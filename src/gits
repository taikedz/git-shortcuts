#!/usr/bin/env bash

set -euo pipefail

GITS_software_version="1.1.1"
GITS_software_version_message="(C) Tai Kedzierski, GPLv3. https://github.com/taikedz/git-shortcuts"

#%include help.sh

#%include autohelp.sh out.sh

#%include modules.sh

gits:main() {

    local action

    action="${1:-}"; shift || :

    [[ -n "$action" ]] || {
        gits:status:short
        echo
        out:info "${CBBLU}(see also: gits fs)"
        exit
    }

    case "$action" in
    --help)
        autohelp:print
        exit 0
        ;;
    --version)
        out:info "Git Shortcuts @ $GITS_software_version"
        out:info "${CGRN}$GITS_software_version_message"
        ;;
    -mm)
        gits:commit "$action" "$@"
        ;;
    help)
        autohelp:print help
        ;;
    clean)
        gits:clean "$@"
        ;;
    co|checkout)
        gits:checkout "$@"
        ;;
    fs)
        gits:status:fetch "$@"
        ;;
    status)
        gits:status:short "$@"
        ;;
    log)
        gits:log "$@"
        ;;
    profile)
        gits:profiles:_dispatch "$@"
        ;;
    push)
        gits:push "$@"
        ;;
    pull)
        gits:pull:_dispatch "$@"
        ;;
    gc)
        gits:gc-full "$@"
        ;;
    branch)
        gits:branch:_dispatch "$@"
        ;;
    diff)
        gits:diff "$@"
        ;;
    remote)
        gits:remote:_dispatch "$@"
        ;;
    version)
        gits:version:_dispatch "$@"
        ;;
    *)
        gits:diff "$action" "$@"
        ;;
    esac
}

gits:main "$@"
